/**
 * jQuery Masonry v2.1.08
 * A dynamic layout plugin for jQuery
 * The flip-side of CSS Floats
 * http://masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */
(function(e,t,n){"use strict";var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,t){var n=this,s=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){r.dispatch.apply(n,s)},t==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,n){this.element=t(n),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(n){this.options=t.extend(!0,{},t.Mason.settings,n),this.styleQueue=[];var r=this.element[0].style;this.originalStyle={height:r.height||""};var i=this.options.containerStyle;for(var s in i)this.originalStyle[s]=r[s]||"";this.element.css(i),this.horizontalDirection=this.options.isRTL?"right":"left";var o=this.element.css("padding-"+this.horizontalDirection),u=this.element.css("padding-top");this.offset={x:o?parseInt(o,10):0,y:u?parseInt(u,10):0},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var a=this;setTimeout(function(){a.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){a.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,n){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var n=0,r=e.length;n<r;n++)this._placeBrick(e[n]);var i={};i.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var s=0;n=this.cols;while(--n){if(this.colYs[n]!==0)break;s++}i.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:i});var o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",u=this.options.animationOptions,a;for(n=0,r=this.styleQueue.length;n<r;n++)a=this.styleQueue[n],a.$el[o](a.style,u);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var n=t(e),r,i,s,o,u;r=Math.ceil(n.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols);if(r===1)s=this.colYs;else{i=this.cols+1-r,s=[];for(u=0;u<i;u++)o=this.colYs.slice(u,u+r),s[u]=Math.max.apply(Math,o)}var a=Math.min.apply(Math,s),f=0;for(var l=0,c=s.length;l<c;l++)if(s[l]===a){f=l;break}var h={top:a+this.offset.y};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x,this.styleQueue.push({$el:n,style:h});var p=a+n.outerHeight(!0),d=this.cols+1-c;for(l=0;l<d;l++)this.colYs[f+l]=p},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;this.colYs=[];while(t--)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,n){if(t){this._filterFindBricks(e).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(e,n)},1)}else this._appended(e,n)},_appended:function(e,t){var n=this._getBricks(e);this.$bricks=this.$bricks.add(n),this.layout(n,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function n(){e.call(i,s)}function r(e){var i=e.target;i.src!==u&&t.inArray(i,a)===-1&&(a.push(i),--o<=0&&(setTimeout(n),s.unbind(".imagesLoaded",r)))}var i=this,s=i.find("img").add(i.filter("img")),o=s.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a=[];return o||n(),s.bind("load.imagesLoaded error.imagesLoaded",r).each(function(){var e=this.src;this.src=u,this.src=e}),i};var s=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){s("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for masonry instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"masonry");n?(n.option(e||{}),n._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}})(window,jQuery),function(e){var t={init:function(t){var n=this,r={},i=!1,s=!1,o=0,u=!1,a={container:e("#countdown"),format:"dd:hh:mm:ss",startTime:"00:01:01:15",isCounting:!0,isAlert:!1,timerEnd:function(){}};e.extend(a,t),r={ss:{nicename:e.t("counter.seconds"),used:!1,delay:1e3,max1:"5",max2:"9",digit1:"0",digit2:"0"},mm:{nicename:e.t("counter.minutes"),used:!1,delay:6e4,max1:"5",max2:"9",digit1:"0",digit2:"0"},hh:{nicename:e.t("counter.hours"),used:!1,delay:36e5,max1:"2",max2:"3",digit1:"0",digit2:"0"},dd:{nicename:e.t("counter.days"),used:!1,delay:864e5,max1:"9",max2:"9",digit1:"0",digit2:"0"}},n.createDigits=function(){var e=a.format.split(":"),t=a.startTime.split(":");for(var i=0;i<e.length;i++)r[e[i]].used=!0,r[e[i]].digit1=t[i][0],r[e[i]].digit2=t[i][1],n.createPairs(e[i])},n.createPairs=function(t){var n=e("<div/>",{"class":"pair pair-"+t,html:'<div class="num-wrap"><div class="num-middle"></div><div class="num"><div class="num-inner"><div class="up"><div class="divi"></div><div class="shadow"></div><div class="inn">'+r[t].digit1+"</div>"+"</div>"+'<div class="down">'+'<div class="divi"></div>'+'<div class="shadow"></div>'+'<div class="inn">'+r[t].digit1+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+'<div class="num-wrap">'+'<div class="num-middle"></div>'+'<div class="num">'+'<div class="num-inner">'+'<div class="up">'+'<div class="divi"></div>'+'<div class="shadow"></div>'+'<div class="inn">'+r[t].digit2+"</div>"+"</div>"+'<div class="down">'+'<div class="divi"></div>'+'<div class="shadow"></div>'+'<div class="inn">'+r[t].digit2+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"<small>"+r[t].nicename+"</small>"});e(a.container).append(n)},n.createCounter=function(t){o++,n.updateCountdown(t,!0),!u&&r["hh"]["digit1"]=="0"&&r["hh"]["digit2"]=="0"&&r["dd"]["digit1"]=="0"&&r["dd"]["digit2"]=="0"&&(u=!0,e(a.container).addClass("countdown-alert-lasthour"))},n.updateCountdown=function(t,o){o&&e(a.container).find(".num-wrap").removeClass("play");var u=e(a.container).find(".pair-"+t),f=u.find(".num-wrap").eq(0),l=u.find(".num-wrap").eq(1);r[t].digit2>0?(r[t].digit2=r[t].digit2-1,r[t].used&&n.updateBox(l,r[t].digit2),n.checkIfDone()&&(clearInterval(i),e(a.container).addClass("countdown-alert"),s=setTimeout(function(){e(a.container).find(".num-wrap").removeClass("play")},1e3),a.timerEnd())):r[t].digit1>0?(r[t].digit1=r[t].digit1-1,r[t].used&&n.updateBox(f,r[t].digit1),r[t].digit2=r[t].max2,r[t].used&&n.updateBox(l,r[t].max2)):(r[t].digit1=r[t].max1,r[t].digit2=r[t].max2,r[t].used&&(n.updateBox(f,r[t].digit1),n.updateBox(l,r[t].digit2)),t=="ss"?n.updateCountdown("mm",!1):t=="mm"?n.updateCountdown("hh",!1):t=="hh"&&n.updateCountdown("dd",!1))},n.updateBox=function(t,n){var r=e(t),i=!1,s=!1,o=!1;r.find(".before").length>0&&r.find(".before").remove(),e("html").hasClass("cssanimations")?(i=r.find(".num"),i.clone().appendTo(r),s=r.find(".num").eq(0),o=r.find(".num").eq(1),o.find(".inn").html(n),s.addClass("before").removeClass("active"),o.addClass("active"),r.addClass("play")):r.find(".num .inn").html(n)},n.checkIfDone=function(){var t=!0;return e.each(r,function(e,n){if(n.digit1>0||n.digit2>0)t=!1}),t},e(a.container).empty().fadeOut("fast",function(){n.createDigits()}),a.isAlert&&e(a.container).addClass("countdown-alert"),e(a.container).fadeIn("fast",function(){if(a.isCounting){if(r.ss.used)var e="ss",t=r.ss.delay;else var e="mm",t=r.mm.delay;i=setInterval(function(){n.createCounter(e)},t)}})}};window.FiverrCountdown=t}(jQuery),function(e){var t={pagination:2,masonryItemsContainer:".db-order-files .order-files-list",masonryItemSelector:".files-item",masonryItemWidth:163,masonryGutterWidth:20,expandedReviewFormShown:!1,expandedModifFormShown:!1,init:function(){this.bindLoadMore(),this.bindReviewForm(),this.bindRequestModificationForm(),this.bindButtons(),this.bindPageTabs(),Fiverr.initSimpleSlider(e(".sd-gallery"),function(e){t.updateShareDeliveryId(e)}),t.sharing=new Fiverr.initShareDeliveries(e(".popup-order-social-share .share-btn"),{onInit:function(t){var n=e(".sd-gallery .js-coll-slider").find(".js-slide:eq(0)").data("id"),r=e(".sd-gallery .js-coll-slider .js-slide:eq(0)").find("a.js-vid-play").length>0?"vid":"pic";t.setShareParams(n,r)}}),t.bindLivePortfolioTrigger(),e(".db-order-activity .msg-form .conversation-contact").length>0&&e(".db-order-activity .msg-form .conversation-contact").appendTo(".db-content-order-detail");var n=Fiverr._getUrlHashVars("#");n.deliver_now&&e(".action-bar-orders .js-btn-deliver-now").length>0&&e(".action-bar-orders .js-btn-deliver-now").trigger(Fiverr.clickEventType)},updateShareDeliveryId:function(n){var r=e(".sd-gallery"),n=n-1,i=e(".sd-gallery .js-coll-slider").find(".js-slide:eq("+n+")").data("id"),s=e(".sd-gallery .js-coll-slider .js-slide:eq("+n+")").find("a.js-vid-play").length>0?"vid":"pic";t.sharing.setShareParams(i,s)},bindLoadMore:function(){new Fiverr.bindLoadMore(e(".db-content"),t.pagination,{onSuccess:function(t,n){t.href=n.next_page_url,Templates.tableTrs(n.trs,e(".db-main-table tbody"))},onError:function(e,t){}})},bindReviewForm:function(){if(e(".review-form-thumbs").length>0){var n=e(".review-form-thumbs"),r=function(t,r){n.find(".thumbs-buttons .btn-standard").removeClass("disabled").removeClass("selected"),e(r).addClass("selected"),t=="pos"?(n.find(".btn-neg").addClass("disabled"),e("#rating_value").val("1")):(n.find(".btn-pos").addClass("disabled"),e("#rating_value").val("0")),n.find("#toggle-ws").bind(Fiverr.clickEventType,function(t){e(this).toggleClass("enable"),e(this).hasClass("enable")?(n.parent().find("#rating_work_sample_included").val("true"),e(this).parent().find(".img-container").toggleClass("opacity")):(n.parent().find("#rating_work_sample_included").val(""),e(this).parent().find(".img-container").toggleClass("opacity"))})};n.find(".thumbs-buttons .btn-standard").bind(Fiverr.clickEventType,function(i){i.preventDefault(),e(".request-modification-form .form-expanded").slideUp("fast",function(){}),t.expandedModifFormShown=!1,n.find(".modification-button .btn-modif").addClass("disabled").removeClass("selected"),t.expandedReviewFormShown||(n.find(".form-expanded").slideDown("fast",function(){}),t.expandedReviewFormShown=!0),e(this).hasClass("selected")||(e(this).hasClass("btn-pos")?r("pos",this):r("neg",this))}),e(".form-expanded.edit-mode").length>0&&(t.expandedReviewFormShown=!0,e.scrollTo(e(".order-review").position().top))}},bindRequestModificationForm:function(){var n=e(".request-modification-form");if(n.length>0){var r=e(".review-form-thumbs");r.find(".modification-button .btn-modif").bind(Fiverr.clickEventType,function(i){i.preventDefault(),r.find(".form-expanded").slideUp("fast",function(){}),t.expandedReviewFormShown=!1,t.expandedModifFormShown||(n.find(".form-expanded").slideDown("fast",function(){}),t.expandedModifFormShown=!0),e(this).removeClass("disabled").addClass("selected"),r.find(".thumbs-buttons .btn-standard").addClass("disabled").removeClass("selected"),e("#rating_value").val("")});if(e("form#req-modification-form").length>0){var i=e("form#req-modification-form");FiverrForms.forms.reqModifForm=new FiverrForms.formHandler(i,{onInit:function(e){e.ta=i.find("#message_body"),new FiverrForms.formTextAreaObj(e.ta)},onSubmit:function(t,n){n.disableFormSubmit();if(e.trim(n.ta.val()).length<5)return n.ta.taShowError(e.t("setforms.errors.message_too_short")),n.enableFormSubmit(),t.preventDefault(),!1}})}}},bindButtons:function(){e(".action-bar-orders .js-btn-submit-reqs").length>0&&e(".action-bar-orders .js-btn-submit-reqs").bind(Fiverr.clickEventType,function(n){n.preventDefault(),e(".order-messages .conv-message:last").removeClass("flash-it"),e(".conv-write").addClass("lookatme"),t.switchPageTab("activity"),e("html, body").animate({scrollTop:e(document).height()-e(window).height()-e(".main-footer").height()},"fast",function(){e(".order-messages .conv-message:last").addClass("flash-it")})}),e(".action-bar-orders .js-btn-review").length>0&&e(".action-bar-orders .js-btn-review").bind(Fiverr.clickEventType,function(t){t.preventDefault(),e(document).scrollTo(e(".order-review"),{duration:500,offset:{top:-100}})}),e(".js-btn-deliver-now").length>0&&e(".js-btn-deliver-now").bind(Fiverr.clickEventType,function(t){t.preventDefault(),e(".popup-seller-delivery").bPopup({amsl:0,closeClass:"btn-close",opacity:.6,follow:[!0,!0],position:["auto","auto"],modalClose:!1,escClose:!1,onOpen:function(){setTimeout(function(){e(".popup-seller-delivery textarea").focus()},1)},beforeClose:function(){e("#new_delivery_v2 .js-uploadifyQueue .close").click()},onClose:function(){FiverrForms.forms.delForm.reset(),e(".popup-seller-delivery").find(".error-container").remove(),e(".popup-seller-delivery").find(".with-error").removeClass("with-error"),e(".js-coll-slider.ws-coll-slider").empty(),e(".ws-actions").hide(),e(".js-coll-slider.ws-coll-slider").css("left",0)}})}),e(".js-btn-social-share").length>0&&e(".js-btn-social-share").bind(Fiverr.clickEventType,function(t){t.preventDefault(),e(".popup-order-social-share").bPopup({closeClass:"btn-close",opacity:.6,follow:[!0,!0],onOpen:function(){},onClose:function(){}})}),e(".link-to-res-center").length>0&&e(".link-to-res-center").bind(Fiverr.clickEventType,function(e){t.switchPageTab("resolution-center")})},bindPageTabs:function(){e(".js-page-tabs").length>0&&e(".js-page-tabs").find("li a").bind(Fiverr.clickEventType,function(n){n.preventDefault();if(!e(this).parent().hasClass("sel")){var r=e(this).attr("rel").substr(8);t.switchPageTab(r)}})},switchPageTab:function(n){var r=e("[rel=js-tabs-"+n+"]"),i=e(".js-page-tabs li"),s=e(".js-page-tab-content");e(".js-page-tab-"+n).length>0&&(e(s).hide(),e(".js-page-tab-"+n).show(),e(i).removeClass("sel"),e(r).parent().addClass("sel"),n=="files"?t.initOrderFiles():n=="resolution-center"&&t.initResolutionCenter(),n=="activity"&&e(".conversation-contact").show())},initOrderFiles:function(){e(t.masonryItemsContainer).length>0&&e(t.masonryItemsContainer).imagesLoaded(function(){e(t.masonryItemsContainer).masonry({itemSelector:t.masonryItemSelector,columnWidth:t.masonryItemWidth,gutterWidth:t.masonryGutterWidth,isAnimated:!Modernizr.csstransitions,isFitWidth:!0}),e(t.masonryItemsContainer).fadeIn().masonry("reload")})},initResolutionCenter:function(){var n=e(".rc-content"),r=n.find(".rc-menu"),i=r.add(n.find(".rc-specific")),s=n.find(".rc-loading"),o=n.find(".rc-loading-short");e(".conversation-contact").hide(),i.find("li a").bind(Fiverr.clickEventType,function(t){t.preventDefault(),url=e(this).attr("href"),res=e(this).attr("data-text"),visited=e(this).attr("visited"),i.hide(),e(this).find("span").addClass("sel"),visited=="false"?i.fadeOut(100,function(){s.fadeIn(100,function(){var t=700;s.find(".loading-text p").each(function(n){var r=this;n>0&&(t+=2e3);var i=setTimeout(function(){clearTimeout(i),e(r).fadeIn(70),n==4&&u(url,res)},t)})})}):i.fadeOut(100,function(){o.fadeIn(100,function(){var e=setTimeout(function(){res=="contact_support"?(n.find(".btn-rc-more-options").hide(),o.fadeOut(50,function(){n.find(".rc-support").fadeIn(50),n.find("footer").show(),FiverrForms.newSupportMessage(),n.find(".btn-rc-back").bind(Fiverr.clickEventType,function(e){e.preventDefault(),n.find(".rc-specific, .rc-support").fadeOut(0,function(){n.find(".rc-menu").fadeIn(100),i.find("li a span").removeClass("sel")})})})):u(url,res),clearTimeout(e)},1500)})})});var u=function(r,s){e.ajax({type:"post",url:r,data:{chosen_resolution:s},success:function(r){FiverrForms.newResolutionMessage(),t.initResolutionCenter(),n.find("footer").show(),n.find(".rc-menu").hide(),n.find(".res-switch-tab").bind(Fiverr.clickEventType,function(n){n.preventDefault(),t.switchPageTab("activity"),e("html, body").animate({scrollTop:e(document).height()-e(window).height()-e(".main-footer").height()},"fast")}),n.find(".btn-rc-back").bind(Fiverr.clickEventType,function(e){e.preventDefault(),n.find(".rc-specific, .rc-support").fadeOut(0,function(){n.find(".rc-menu").fadeIn(100),i.find("li a span").removeClass("sel")})}),n.find("form .res-sprt").bind(Fiverr.clickEventType,function(t){t.preventDefault(),n.find(".btn-rc-more-options").hide();var r=e(this).attr("data");n.find(".rc-specific").fadeOut(0,function(){n.find(".rc-support").fadeIn(100),n.find(".rc-support").find("#ticket_tag_2").val(r),FiverrForms.newSupportMessage()})}),n.find(".btn-rc-more-options a").bind(Fiverr.clickEventType,function(t){t.preventDefault(),n.find(".rc-specific").fadeOut(0,function(){n.find(".rc-more-options").fadeIn(100),n.find(".btn-rc-more-options").hide(),n.find(".btn-rc-back").unbind(Fiverr.clickEventType),n.find(".btn-rc-back").bind(Fiverr.clickEventType,function(e){e.preventDefault(),n.find(".btn-rc-more-options").show(),n.find(".rc-more-options").fadeOut(0,function(){n.find(".rc-specific").fadeIn(100),n.find(".btn-rc-back").bind(Fiverr.clickEventType,function(e){e.preventDefault(),n.find(".rc-specific, .rc-support").fadeOut(0,function(){n.find(".rc-menu").fadeIn(100),i.find("li a span").removeClass("sel")})})})}),n.find(".seller-option").bind(Fiverr.clickEventType,function(t){n.find(".seller-option").removeClass("sel"),e(this).addClass("sel");var r=e(this).attr("data");n.find("#new_resolution_options_v2").find("#cancel-format").val(r)})})})}})}},bindLivePortfolioTrigger:function(){var t=e(".ws-toggler");t.find("a").bind(Fiverr.clickEventType,function(e){e.preventDefault(),FiverrDashboard.toggleLivePortfolio(this.href,function(e){t.remove()})})}};window.FiverrOrders=t,e(document).ready(function(){t.init()})}(jQuery);